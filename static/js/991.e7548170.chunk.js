"use strict";(self.webpackChunkpassenger=self.webpackChunkpassenger||[]).push([[991],{1991:function(e,r,n){n.r(r),n.d(r,{default:function(){return Z}});var t=n(4165),s=n(5861),i=n(3433),c=n(9439),a=n(2791),d=n(9140),o=n(2591),l=n(3360),u=n(2469),h=n(455),x=n(3575),f=n(1413),v=n(3855),p=n(184),j=function(e){var r=e.showNewVehicle,n=e.drivers,i=(0,x.a)().firestoreUser,j=(0,a.useRef)(),Z=(0,a.useRef)(),m=(0,a.useRef)(),b=(0,a.useState)(""),w=(0,c.Z)(b,2),N=w[0],y=w[1],g=(0,a.useState)(!1),k=(0,c.Z)(g,2),C=k[0],R=k[1];function V(){return(V=(0,s.Z)((0,t.Z)().mark((function e(n){var s,c,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),c={owner:(null===Z||void 0===Z||null===(s=Z.current)||void 0===s?void 0:s.value)||i.uid,regNum:j.current.value,brand:m.current.value},e.prev=2,y(""),R(!0),e.next=7,(0,h.NV)(c);case 7:a=e.sent,r((0,f.Z)({uid:a},c)),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(2),y("Failed to add new Vehicle."),console.log(e.t0.message);case 15:R(!1);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}return(0,p.jsx)("div",{className:"d-flex dashboard",children:(0,p.jsxs)(d.Z,{className:"w-100 p-2",children:[(0,p.jsx)("h3",{children:"Add new Vehicle"}),(0,p.jsx)(v.Z,{onSubmit:function(e){return V.apply(this,arguments)},children:(0,p.jsx)(o.Z,{striped:!0,bordered:!0,hover:!0,children:(0,p.jsx)("tbody",{children:(0,p.jsxs)("tr",{children:["admin"===i.role&&(0,p.jsx)("td",{children:(0,p.jsxs)(v.Z.Control,{as:"select",id:"owner",required:!0,ref:Z,children:[(0,p.jsx)("option",{value:"",children:"Owner"}),n.map((function(e){return(0,p.jsx)("option",{value:e.uid,children:"".concat(e.firstName," ").concat(e.lastName)},e.uid)}))]})}),(0,p.jsx)("td",{children:(0,p.jsx)(v.Z.Control,{type:"text",placeholder:"Brand",id:"brand",required:!0,ref:m})}),(0,p.jsx)("td",{children:(0,p.jsx)(v.Z.Control,{type:"text",id:"regNum",placeholder:"Registration Number",required:!0,ref:j})}),(0,p.jsx)("td",{children:(0,p.jsx)(l.Z,{disabled:C,type:"submit",className:"w-100",children:"Add"})})]})})})}),N&&(0,p.jsx)(u.Z,{variant:"danger",children:N})]})})},Z=function(){var e=(0,x.a)().firestoreUser,r=(0,a.useState)([]),n=(0,c.Z)(r,2),f=n[0],v=n[1],Z=(0,a.useState)([]),m=(0,c.Z)(Z,2),b=m[0],w=m[1];function N(){return(N=(0,s.Z)((0,t.Z)().mark((function e(r,n){var s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.w7)(r);case 2:(s=b).splice(n,1),w((0,i.Z)(s));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,a.useEffect)((function(){var r=function(){var r=(0,s.Z)((0,t.Z)().mark((function r(){var n;return(0,t.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("admin"!==e.role){r.next=8;break}return r.t0=w,r.next=4,(0,h.rE)();case 4:r.t1=r.sent,(0,r.t0)(r.t1),r.next=13;break;case 8:return r.t2=w,r.next=11,(0,h.rE)(e.uid);case 11:r.t3=r.sent,(0,r.t2)(r.t3);case 13:return r.next=15,(0,h.jT)();case 15:n=r.sent,v(n);case 17:case"end":return r.stop()}}),r)})));return function(){return r.apply(this,arguments)}}();r()}),[e.role,e.uid]),(0,p.jsx)(d.Z,{className:"h-100",children:(0,p.jsxs)(d.Z.Body,{children:[(0,p.jsx)("h3",{children:"Vehicles"}),(0,p.jsx)("p",{children:"To add a vehicle you must have user-drivers."}),(0,p.jsxs)(o.Z,{striped:!0,bordered:!0,hover:!0,children:[(0,p.jsx)("thead",{children:(0,p.jsxs)("tr",{children:[(0,p.jsx)("th",{children:"#"}),"admin"===e.role&&(0,p.jsx)("th",{children:"Owner"}),(0,p.jsx)("th",{children:"Brand"}),(0,p.jsx)("th",{children:"Registration Number"}),(0,p.jsx)("th",{})]})}),(0,p.jsx)("tbody",{children:null===b||void 0===b?void 0:b.map((function(r,n){var t,s=r.uid,i=r.owner,c=r.brand,a=r.regNum;return(0,p.jsxs)("tr",{children:[(0,p.jsx)("td",{children:n+1}),"admin"===e.role&&(0,p.jsx)("td",{children:(null===(t=f.find((function(e){return e.uid===i})))||void 0===t?void 0:t.firstName)||i}),(0,p.jsx)("td",{children:c}),(0,p.jsx)("td",{children:a}),(0,p.jsx)("td",{children:(0,p.jsx)(l.Z,{onClick:function(){return function(e,r){return N.apply(this,arguments)}(s,n)},children:"Del"})})]},n)}))})]}),0===(null===b||void 0===b?void 0:b.length)&&(0,p.jsx)(u.Z,{variant:"info",children:"No vehicles yet"}),(0,p.jsx)(j,{showNewVehicle:function(e){w([].concat((0,i.Z)(b),[e]))},drivers:f})]})})}},2591:function(e,r,n){var t=n(1413),s=n(5987),i=n(1694),c=n.n(i),a=n(2791),d=n(162),o=n(184),l=["bsPrefix","className","striped","bordered","borderless","hover","size","variant","responsive"],u=a.forwardRef((function(e,r){var n=e.bsPrefix,i=e.className,a=e.striped,u=e.bordered,h=e.borderless,x=e.hover,f=e.size,v=e.variant,p=e.responsive,j=(0,s.Z)(e,l),Z=(0,d.vE)(n,"table"),m=c()(i,Z,v&&"".concat(Z,"-").concat(v),f&&"".concat(Z,"-").concat(f),a&&"".concat(Z,"-").concat("string"===typeof a?"striped-".concat(a):"striped"),u&&"".concat(Z,"-bordered"),h&&"".concat(Z,"-borderless"),x&&"".concat(Z,"-hover")),b=(0,o.jsx)("table",(0,t.Z)((0,t.Z)({},j),{},{className:m,ref:r}));if(p){var w="".concat(Z,"-responsive");return"string"===typeof p&&(w="".concat(w,"-").concat(p)),(0,o.jsx)("div",{className:w,children:b})}return b}));r.Z=u}}]);
//# sourceMappingURL=991.e7548170.chunk.js.map