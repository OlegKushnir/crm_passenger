{"version":3,"file":"static/js/991.e7548170.chunk.js","mappings":"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","sources":["components/Dashboard/AddVehicle.jsx","components/Dashboard/Vehicles.jsx","../node_modules/react-bootstrap/esm/Table.js"],"sourcesContent":["import React from \"react\";\r\nimport { Card, Form, Button, Table, Alert } from \"react-bootstrap\";\r\nimport { useState, useRef } from \"react\";\r\nimport { addVehicle } from \"../../firebase/firestore\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport PropTypes from \"prop-types\";\r\n\r\n\r\nconst AddVehicle = ({ showNewVehicle, drivers }) => {\r\n  const { firestoreUser } = useAuth();\r\n  const regNumRef = useRef();\r\n  const ownerRef = useRef();\r\n  const brandRef = useRef();\r\n  const [err, setErr] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n\r\n  async function handleSubmit(event) {\r\n    event.preventDefault();\r\n    const newVehicle = {\r\n      owner: ownerRef?.current?.value || firestoreUser.uid,\r\n      regNum: regNumRef.current.value,\r\n      brand: brandRef.current.value,\r\n    };\r\n\r\n    try {\r\n      setErr(\"\");\r\n      setLoading(true);\r\n      const res = await addVehicle(newVehicle);\r\n      showNewVehicle({ uid: res, ...newVehicle });\r\n    } catch (e) {\r\n      setErr(\"Failed to add new Vehicle.\");\r\n      console.log(e.message);\r\n    }\r\n    setLoading(false);\r\n  }\r\n\r\n  return (\r\n    <div className=\"d-flex dashboard\">\r\n      <Card className=\"w-100 p-2\">\r\n        <h3>Add new Vehicle</h3>\r\n        <Form onSubmit={handleSubmit}>\r\n          <Table striped bordered hover>\r\n            <tbody>\r\n              <tr>\r\n                {firestoreUser.role === \"admin\" && (\r\n                  <td>\r\n                    <Form.Control\r\n                      as=\"select\"\r\n                      id=\"owner\"\r\n                      required\r\n                      ref={ownerRef}\r\n                    >\r\n                      <option value=\"\">Owner</option>\r\n                      {drivers.map((driver) => (\r\n                        <option\r\n                          key={driver.uid}\r\n                          value={driver.uid}\r\n                        >{`${driver.firstName} ${driver.lastName}`}</option>\r\n                      ))}\r\n                    </Form.Control>\r\n                  </td>\r\n                )}\r\n                <td>\r\n                  <Form.Control\r\n                    type=\"text\"\r\n                    placeholder=\"Brand\"\r\n                    id=\"brand\"\r\n                    required\r\n                    ref={brandRef}\r\n                  ></Form.Control>\r\n                </td>\r\n                <td>\r\n                  <Form.Control\r\n                    type=\"text\"\r\n                    id=\"regNum\"\r\n                    placeholder=\"Registration Number\"\r\n                    required\r\n                    ref={regNumRef}\r\n                  ></Form.Control>\r\n                </td>\r\n                <td>\r\n                  <Button disabled={loading} type=\"submit\" className=\"w-100\">\r\n                    Add\r\n                  </Button>\r\n                </td>\r\n              </tr>\r\n            </tbody>\r\n          </Table>\r\n        </Form>\r\n        {err && <Alert variant=\"danger\">{err}</Alert>}\r\n      </Card>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AddVehicle;\r\n\r\nAddVehicle.propTypes = {\r\n  showNewVehicle: PropTypes.func.isRequired,\r\n  drivers: PropTypes.arrayOf(\r\n    PropTypes.shape({\r\n      firstName: PropTypes.string,\r\n      lastName: PropTypes.string,\r\n      uid: PropTypes.string.isRequired,\r\n    })\r\n  ).isRequired\r\n};","import React from \"react\";\r\nimport { Button, Alert, Card, Table } from \"react-bootstrap\";\r\nimport { useState, useEffect } from \"react\";\r\nimport {\r\n  getVehicles,\r\n  getDrivers,\r\n  deleteVehicle,\r\n} from \"../../firebase/firestore\";\r\nimport { useAuth } from \"../../contexts/AuthContext\";\r\nimport AddVehicle from \"./AddVehicle\";\r\n\r\nconst Vehicles = () => {\r\n  const { firestoreUser } = useAuth();\r\n  const [drivers, setDrivers] = useState([]);\r\n  const [vehicles, setVehicles] = useState([]);\r\n  function showNewVehicle(newVehicle) {\r\n    setVehicles([...vehicles, newVehicle]);\r\n  }\r\n\r\n  async function handleDelete(tripId, index) {\r\n    await deleteVehicle(tripId);\r\n    const newVh = vehicles;\r\n    newVh.splice(index, 1);\r\n    setVehicles([...newVh]);\r\n  }\r\n\r\n  useEffect(() => {\r\n    const fetchVehicles = async () => {\r\n      firestoreUser.role === \"admin\"\r\n        ? setVehicles(await getVehicles())\r\n        : setVehicles(await getVehicles(firestoreUser.uid));\r\n      const driversArr = await getDrivers();\r\n      setDrivers(driversArr);\r\n    };\r\n    fetchVehicles();\r\n  }, [firestoreUser.role, firestoreUser.uid]);\r\n\r\n  return (\r\n    <Card className=\"h-100\">\r\n      <Card.Body>\r\n        <h3>Vehicles</h3>\r\n        <p>To add a vehicle you must have user-drivers.</p>\r\n        <Table striped bordered hover>\r\n          <thead>\r\n            <tr>\r\n              <th>#</th>\r\n              {firestoreUser.role === \"admin\" && <th>Owner</th>}\r\n              <th>Brand</th>\r\n              <th>Registration Number</th>\r\n              <th></th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {vehicles?.map(({ uid, owner, brand, regNum }, index) => (\r\n              <tr key={index}>\r\n                <td>{index + 1}</td>\r\n                {firestoreUser.role === \"admin\" && (\r\n                  <td>\r\n                    {drivers.find((dr) => dr.uid === owner)?.firstName || owner}\r\n                  </td>\r\n                )}\r\n                <td>{brand}</td>\r\n                <td>{regNum}</td>\r\n                <td>\r\n                  <Button onClick={() => handleDelete(uid, index)}>Del</Button>\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </Table>\r\n        {vehicles?.length === 0 && <Alert variant=\"info\">No vehicles yet</Alert>}\r\n        <AddVehicle showNewVehicle={showNewVehicle} drivers={drivers} />\r\n      </Card.Body>\r\n    </Card>\r\n  );\r\n};\r\n\r\nexport default Vehicles;\r\n","import classNames from 'classnames';\nimport * as React from 'react';\nimport { useBootstrapPrefix } from './ThemeProvider';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nconst Table = /*#__PURE__*/React.forwardRef(({\n  bsPrefix,\n  className,\n  striped,\n  bordered,\n  borderless,\n  hover,\n  size,\n  variant,\n  responsive,\n  ...props\n}, ref) => {\n  const decoratedBsPrefix = useBootstrapPrefix(bsPrefix, 'table');\n  const classes = classNames(className, decoratedBsPrefix, variant && `${decoratedBsPrefix}-${variant}`, size && `${decoratedBsPrefix}-${size}`, striped && `${decoratedBsPrefix}-${typeof striped === 'string' ? `striped-${striped}` : 'striped'}`, bordered && `${decoratedBsPrefix}-bordered`, borderless && `${decoratedBsPrefix}-borderless`, hover && `${decoratedBsPrefix}-hover`);\n  const table = /*#__PURE__*/_jsx(\"table\", {\n    ...props,\n    className: classes,\n    ref: ref\n  });\n  if (responsive) {\n    let responsiveClass = `${decoratedBsPrefix}-responsive`;\n    if (typeof responsive === 'string') {\n      responsiveClass = `${responsiveClass}-${responsive}`;\n    }\n    return /*#__PURE__*/_jsx(\"div\", {\n      className: responsiveClass,\n      children: table\n    });\n  }\n  return table;\n});\nexport default Table;"],"names":["_ref","showNewVehicle","drivers","firestoreUser","useAuth","regNumRef","useRef","ownerRef","brandRef","_useState","useState","_useState2","_slicedToArray","err","setErr","_useState3","_useState4","loading","setLoading","_handleSubmit","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","_ownerRef$current","newVehicle","res","wrap","_context","prev","next","preventDefault","owner","current","value","uid","regNum","brand","addVehicle","sent","_objectSpread","t0","console","log","message","stop","apply","arguments","_jsx","className","children","_jsxs","Card","Form","onSubmit","_x","Table","striped","bordered","hover","role","as","id","required","ref","map","driver","concat","firstName","lastName","type","placeholder","Button","disabled","Alert","variant","setDrivers","vehicles","setVehicles","_handleDelete","_callee2","tripId","index","newVh","_context2","deleteVehicle","splice","_toConsumableArray","useEffect","fetchVehicles","driversArr","getVehicles","t1","t2","t3","getDrivers","_ref2","_drivers$find","find","dr","onClick","_x2","handleDelete","length","AddVehicle","React","bsPrefix","borderless","size","responsive","props","_objectWithoutProperties","_excluded","decoratedBsPrefix","useBootstrapPrefix","classes","classNames","table","responsiveClass"],"sourceRoot":""}